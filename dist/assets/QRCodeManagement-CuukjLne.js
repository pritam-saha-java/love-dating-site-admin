import{r as c,j as e,L as j}from"./index-Cu_ODyfg.js";import{a as d}from"./axios-BimPEqV4.js";/* empty css                      */const l="https://back.lovedatingsite.com",g=async()=>{try{return(await d.get(`${l}/admin/get-all-qr-codes`)).data}catch(r){throw console.error("Error fetching QR codes:",r),r}},Q=async r=>{try{return(await d.post(`${l}/admin/save-qr-code`,r)).data}catch(t){throw console.error("Error creating QR code:",t),t}},f=async r=>{try{await d.delete(`${l}/admin/delete-qr-code/${r}`)}catch(t){throw console.error("Error deleting QR code:",t),t}},C=async r=>{try{return(await d.put(`${l}/admin/set-active-qr-code/${r}`)).data}catch(t){throw console.error("Error setting active QR code:",t),t}},A=()=>{const[r,t]=c.useState([]),[p,i]=c.useState(!1),[n,h]=c.useState({upiId:"",payeeName:"",isActive:!1});c.useEffect(()=>{o()},[]);const o=async()=>{try{const s=await g();t(s)}catch(s){console.error("Error fetching QR codes:",s)}},u=()=>{h({upiId:"",payeeName:"",isActive:!1}),i(!0)},m=()=>{i(!1)},x=s=>{const{name:a,value:N}=s.target;h({...n,[a]:N})},y=async()=>{try{await Q(n),o(),m()}catch(s){console.error("Error saving QR code:",s)}},b=async s=>{try{await f(s),o()}catch(a){console.error("Error deleting QR code:",a)}},v=async s=>{try{await C(s),o()}catch(a){console.error("Error setting active QR code:",a)}};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"navbar",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(j,{to:"/user-management",children:"User Management"})}),e.jsx("li",{children:e.jsx(j,{to:"/qr-code-management",children:"QR Code Management"})})]})}),e.jsx("div",{className:"d-flex",children:e.jsxs("div",{className:"container mt-5",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h2",{children:"Manage QR Codes"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Add QR Code"})]}),e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"UPI ID"}),e.jsx("th",{children:"Payee Name"}),e.jsx("th",{children:"Is Active"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.upiId}),e.jsx("td",{children:s.payeeName}),e.jsx("td",{children:s.active?"Yes":"No"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-danger me-2",onClick:()=>b(s.id),children:"Delete"}),e.jsx("button",{className:"btn btn-success",onClick:()=>v(s.id),disabled:s.active,children:"Set Active"})]})]},s.id))})]}),p&&e.jsx("div",{className:"modal show d-block",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header",children:e.jsx("h5",{className:"modal-title",children:"Add QR Code"})}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"upiId",children:"UPI ID"}),e.jsx("input",{type:"text",className:"form-control",id:"upiId",name:"upiId",value:n.upiId,onChange:x})]}),e.jsxs("div",{className:"form-group mt-3",children:[e.jsx("label",{htmlFor:"payeeName",children:"Payee Name"}),e.jsx("input",{type:"text",className:"form-control",id:"payeeName",name:"payeeName",value:n.payeeName,onChange:x})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:m,children:"Close"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:y,children:"Add QR Code"})]})]})})})]})})]})};export{A as default};
